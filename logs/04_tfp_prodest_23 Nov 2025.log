----------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/logs/04_tfp_prodest_23 Nov 2025.log
  log type:  text
 opened on:  23 Nov 2025, 00:17:32

. 
. *------------------------------------------------------------------------------*
. * Load cleaned panel
. *------------------------------------------------------------------------------*
. 
. use "$clean_dir/panel_eam_harmonized.dta", clear

. 
. * Keep only observations valid for TFP estimation
. keep if valid_for_tfp == 1
(10,321 observations deleted)

. 
. * Keep only manufacturing sectors (ISIC Rev 4 divisions 10-33)
. keep if ciiu_rev4_2d >= 10 & ciiu_rev4_2d <= 33
(13,241 observations deleted)

. 
. local n_obs_total = _N

. 
. * Set panel structure
. xtset firm_id year

Panel variable: firm_id (unbalanced)
 Time variable: year, 1993 to 2023, but with gaps
         Delta: 1 unit

. 
. *------------------------------------------------------------------------------*
. * Identify industries with sufficient observations
. *------------------------------------------------------------------------------*
. 
. * Count observations by industry
. egen n_obs_industry = count(firm_id), by(ciiu_rev4_2d)

. egen n_firms_industry = count(firm_id), by(ciiu_rev4_2d year)

. egen n_periods_industry = count(firm_id), by(ciiu_rev4_2d firm_id)

. 
. * Summary by industry
. preserve

.     bysort ciiu_rev4_2d firm_id: gen firm_tag = (_n == 1)

.     collapse (count) n_obs=firm_id ///
>              (mean) avg_firms=n_firms_industry ///
>              (sum) n_distinct_firms=firm_tag, ///
>              by(ciiu_rev4_2d)

.     
.     * Label for interpretation
.     label variable ciiu_rev4_2d "CIIU 2-digit code"

.     label variable n_obs "Total observations"

.     label variable avg_firms "Average firms per year"

.     label variable n_distinct_firms "Distinct firms"

.     
.     list ciiu_rev4_2d n_obs avg_firms n_distinct_firms, separator(0) abbreviate(20)

     +-----------------------------------------------------+
     | ciiu_rev4_2d   n_obs   avg_firms   n_distinct_firms |
     |-----------------------------------------------------|
  1. |           10   17022    1424.475               1896 |
  2. |           11     816    75.85294                125 |
  3. |           13    2750    235.7244                363 |
  4. |           14    9151    781.5435               1126 |
  5. |           15    3062    264.4788                461 |
  6. |           16    1770    153.0034                247 |
  7. |           17    1517    126.7719                188 |
  8. |           18    4743    407.6409                598 |
  9. |           19     985    83.70051                127 |
 10. |           20    5696    497.6707                684 |
 11. |           21    2187    183.1216                230 |
 12. |           22    7585    637.2255                865 |
 13. |           23    5156    431.5815                660 |
 14. |           24    1512    133.1098                230 |
 15. |           25    6806    578.9545                864 |
 16. |           26      45    11.31111                 14 |
 17. |           27    1583    158.7878                222 |
 18. |           28    4456    390.0583                582 |
 19. |           29    1731    147.6008                230 |
 20. |           30     353    29.74221                 59 |
 21. |           31    6015    587.6061               1700 |
 22. |           32    9442     773.209               2653 |
 23. |           33     639    263.6416                383 |
     +-----------------------------------------------------+

.     
.     * Export
.     export delimited using "$output_dir/tfp_industry_summary.csv", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/output/tfp_industry_summary.csv saved

. restore

. 
. * Keep industries with at least 100 observations
. keep if n_obs_industry >= 100
(45 observations deleted)

. 
. * Get list of industries
. levelsof ciiu_rev4_2d, local(industries) clean
10 11 13 14 15 16 17 18 19 20 21 22 23 24 25 27 28 29 30 31 32 33

. local n_industries : word count `industries'

. 
. *------------------------------------------------------------------------------*
. * Initialize TFP variables for multiple methods
. *------------------------------------------------------------------------------*
. 
. * Levinsohn-Petrin
. gen omega_lp = .
(94,977 missing values generated)

. label variable omega_lp "TFP (Levinsohn-Petrin 2003)"

. 
. * Wooldridge  
. gen omega_wrdg = .
(94,977 missing values generated)

. label variable omega_wrdg "TFP (Wooldridge 2009)"

. 
. * Ackerberg-Caves-Frazer
. gen omega_acf = .
(94,977 missing values generated)

. label variable omega_acf "TFP (Ackerberg-Caves-Frazer 2015)"

. 
. *------------------------------------------------------------------------------*
. * Storage for production function coefficients
. *------------------------------------------------------------------------------*
. 
. tempfile coef_storage

. preserve

.     clear

.     
.     * Initialize dataset to store coefficients
.     gen str10 method = ""

.     gen ciiu_rev4_2d = .

.     gen alpha_l = .

.     gen alpha_k = .

.     gen alpha_m = .

.     gen se_l = .

.     gen se_k = .

.     gen se_m = .

.     gen n_obs = .

.     gen n_firms = .

.     gen converged = 0

.     
.     * Labels
.     label variable method "Estimation method"

.     label variable ciiu_rev4_2d "CIIU 2-digit code"

.     label variable alpha_l "Labor coefficient"

.     label variable alpha_k "Capital coefficient"

.     label variable alpha_m "Intermediates coefficient"

.     label variable se_l "SE(Labor)"

.     label variable se_k "SE(Capital)"

.     label variable se_m "SE(Intermediates)"

.     label variable n_obs "Observations"

.     label variable n_firms "Number of firms"

.     label variable converged "Convergence indicator"

.     
.     save `coef_storage', replace
(dataset contains 0 observations)
(file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp not found)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

. restore

. 
. *------------------------------------------------------------------------------*
. * Estimate TFP by industry using multiple methods
. *------------------------------------------------------------------------------*
. 
. * Loop over industries
. local counter = 1

. foreach ind of local industries {
  2.     
.     preserve
  3.     keep if ciiu_rev4_2d == `ind'
  4.     
.     local n_obs_ind = _N
  5.     quietly: distinct firm_id
  6.     local n_firms_ind = r(ndistinct)
  7.     
.     * Verify we have variation
.     quietly: summarize ln_output
  8.     if r(sd) < 0.01 | r(N) < 100 {
  9.         restore
 10.         local counter = `counter' + 1
 11.         continue
 12.     }
 13.     
.     * Initialize convergence flags
.     local lp_converged = 0
 14.     local wrdg_converged = 0
 15.     local acf_converged = 0
 16.     
.     *--------------------------------------------------------------------------*
.     * METHOD 1: Levinsohn-Petrin (2003)
.     *--------------------------------------------------------------------------*    
.     capture {
 17.         prodest ln_output, ///
>             free(ln_labor) ///
>             state(ln_capital) ///
>             proxy(ln_intermediates) ///
>             method(lp) ///
>             poly(3) ///
>             va ///
>             opt(bfgs) ///
>             maxiter(500) ///
>             id(firm_id) ///
>             t(year)
 18.         
.         * Check convergence
.         if _rc == 0 {
 19.             local lp_converged = 1
 20.             
.             * Store coefficients
.             matrix b_lp = e(b)
 21.             local alpha_l_lp = b_lp[1,1]
 22.             local alpha_k_lp = b_lp[1,2]
 23.             local alpha_m_lp = b_lp[1,3]
 24.             
.             * Standard errors
.             matrix V_lp = e(V)
 25.             local se_l_lp = sqrt(V_lp[1,1])
 26.             local se_k_lp = sqrt(V_lp[2,2])
 27.             local se_m_lp = sqrt(V_lp[3,3])
 28.             
.             * Get TFP predictions
.             predict double omega_lp_temp, residuals
 29.             
.             * Store in main dataset
.             tempfile temp_lp
 30.             keep firm_id year omega_lp_temp
 31.             save `temp_lp'
 32.         }
 33.     }
 34.     
.     *--------------------------------------------------------------------------*
.     * METHOD 2: Wooldridge (2009)
.     *--------------------------------------------------------------------------*
.     *--------------------------------------------------------------------------*
.     * METHOD 2: Wooldridge (2009)
.     *--------------------------------------------------------------------------*
.     restore
 35.     preserve
 36.     keep if ciiu_rev4_2d == `ind'
 37.     
.     capture {
 38.         prodest ln_output, ///
>             free(ln_labor) ///
>             state(ln_capital) ///
>             proxy(ln_intermediates) ///
>             method(wrdg) ///
>             poly(3) ///
>             va ///
>             opt(bfgs) ///
>             maxiter(500) ///
>             id(firm_id) ///
>             t(year)
 39.         
.         * Check convergence
.         if _rc == 0 {
 40.             local wrdg_converged = 1
 41.             
.             * Store coefficients
.             matrix b_wrdg = e(b)
 42.             local alpha_l_wrdg = b_wrdg[1,1]
 43.             local alpha_k_wrdg = b_wrdg[1,2]
 44.             local alpha_m_wrdg = b_wrdg[1,3]
 45.             
.             * Standard errors
.             matrix V_wrdg = e(V)
 46.             local se_l_wrdg = sqrt(V_wrdg[1,1])
 47.             local se_k_wrdg = sqrt(V_wrdg[2,2])
 48.             local se_m_wrdg = sqrt(V_wrdg[3,3])
 49.             
.             * Get TFP predictions
.             predict double omega_wrdg_temp, residuals
 50.             
.             * Store in tempfile
.             tempfile temp_wrdg
 51.             keep firm_id year omega_wrdg_temp
 52.             save `temp_wrdg', replace
 53.         }
 54.     }
 55.     
.     *--------------------------------------------------------------------------*
.     * METHOD 3: Ackerberg-Caves-Frazer (2015)
.     *--------------------------------------------------------------------------*
.     restore
 56.     preserve
 57.     keep if ciiu_rev4_2d == `ind'
 58.     
.         capture {
 59.         prodest ln_output, ///
>             free(ln_labor) ///
>             state(ln_capital) ///
>             proxy(ln_intermediates) ///
>             method(lp) ///
>             acf ///
>             poly(3) ///
>             va ///
>             opt(bfgs) ///
>             maxiter(500) ///
>             id(firm_id) ///
>             t(year)
 60.         
.         * Check convergence
.         if _rc == 0 {
 61.             local acf_converged = 1
 62.             
.             * Store coefficients
.             matrix b_acf = e(b)
 63.             local alpha_l_acf = b_acf[1,1]
 64.             local alpha_k_acf = b_acf[1,2]
 65.             local alpha_m_acf = b_acf[1,3]
 66.             
.             * Standard errors
.             matrix V_acf = e(V)
 67.             local se_l_acf = sqrt(V_acf[1,1])
 68.             local se_k_acf = sqrt(V_acf[2,2])
 69.             local se_m_acf = sqrt(V_acf[3,3])
 70.             
.             * Get TFP predictions
.             predict double omega_acf_temp, residuals
 71.             
.             * Store in main dataset
.             tempfile temp_acf
 72.             keep firm_id year omega_acf_temp
 73.             save `temp_acf'
 74.         }
 75.     }
 76.     
.     *--------------------------------------------------------------------------*
.     * Store coefficients
.     *--------------------------------------------------------------------------*
.     
.     restore
 77.     
.     * Merge LP results
.     if `lp_converged' == 1 {
 78.         merge 1:1 firm_id year using `temp_lp', ///
>             update replace ///
>             keep(master match) ///
>             nogenerate
 79.         replace omega_lp = omega_lp_temp if ciiu_rev4_2d == `ind'
 80.         drop omega_lp_temp
 81.         
.         * Store coefficients
.         preserve
 82.             use `coef_storage', clear
 83.             local new = _N + 1
 84.             set obs `new'
 85.             replace method = "LP" in `new'
 86.             replace ciiu_rev4_2d = `ind' in `new'
 87.             replace alpha_l = `alpha_l_lp' in `new'
 88.             replace alpha_k = `alpha_k_lp' in `new'
 89.             replace alpha_m = `alpha_m_lp' in `new'
 90.             replace se_l = `se_l_lp' in `new'
 91.             replace se_k = `se_k_lp' in `new'
 92.             replace se_m = `se_m_lp' in `new'
 93.             replace n_obs = `n_obs_ind' in `new'
 94.             replace n_firms = `n_firms_ind' in `new'
 95.             replace converged = 1 in `new'
 96.             save `coef_storage', replace
 97.         restore
 98.     }
 99.     
.     * Merge Wooldridge results
.     if `wrdg_converged' == 1 {
100.         merge 1:1 firm_id year using `temp_wrdg', ///
>             update replace ///
>             keep(master match) ///
>             nogenerate
101.         replace omega_wrdg = omega_wrdg_temp if ciiu_rev4_2d == `ind'
102.         drop omega_wrdg_temp
103.         
.         * Store coefficients
.         preserve
104.             use `coef_storage', clear
105.             local new = _N + 1
106.             set obs `new'
107.             replace method = "WRDG" in `new'
108.             replace ciiu_rev4_2d = `ind' in `new'
109.             replace alpha_l = `alpha_l_wrdg' in `new'
110.             replace alpha_k = `alpha_k_wrdg' in `new'
111.             replace alpha_m = `alpha_m_wrdg' in `new'
112.             replace se_l = `se_l_wrdg' in `new'
113.             replace se_k = `se_k_wrdg' in `new'
114.             replace se_m = `se_m_wrdg' in `new'
115.             replace n_obs = `n_obs_ind' in `new'
116.             replace n_firms = `n_firms_ind' in `new'
117.             replace converged = 1 in `new'
118.             save `coef_storage', replace
119.         restore
120.     }
121.     
.     * Merge ACF results
.     if `acf_converged' == 1 {
122.         merge 1:1 firm_id year using `temp_acf', ///
>             update replace ///
>             keep(master match) ///
>             nogenerate
123.         replace omega_acf = omega_acf_temp if ciiu_rev4_2d == `ind'
124.         drop omega_acf_temp
125.         
.         * Store coefficients
.         preserve
126.             use `coef_storage', clear
127.             local new = _N + 1
128.             set obs `new'
129.             replace method = "ACF" in `new'
130.             replace ciiu_rev4_2d = `ind' in `new'
131.             replace alpha_l = `alpha_l_acf' in `new'
132.             replace alpha_k = `alpha_k_acf' in `new'
133.             replace alpha_m = `alpha_m_acf' in `new'
134.             replace se_l = `se_l_acf' in `new'
135.             replace se_k = `se_k_acf' in `new'
136.             replace se_m = `se_m_acf' in `new'
137.             replace n_obs = `n_obs_ind' in `new'
138.             replace n_firms = `n_firms_ind' in `new'
139.             replace converged = 1 in `new'
140.             save `coef_storage', replace
141.         restore
142.     }
143.     
.     local counter = `counter' + 1
144. }
(77,955 observations deleted)
(77,955 observations deleted)
(77,955 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        77,955
        from master                    77,955  
        from using                          0  

    Matched                            17,022
        not updated                    17,022  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(17,022 real changes made)
Number of observations (_N) was 0, now 1.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        77,955
        from master                    77,955  
        from using                          0  

    Matched                            17,022
        not updated                    17,022  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(17,022 real changes made)
Number of observations (_N) was 1, now 2.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        77,955
        from master                    77,955  
        from using                          0  

    Matched                            17,022
        not updated                    17,022  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(17,022 real changes made)
Number of observations (_N) was 2, now 3.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(94,161 observations deleted)
(94,161 observations deleted)
(94,161 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,161
        from master                    94,161  
        from using                          0  

    Matched                               816
        not updated                       816  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(816 real changes made)
Number of observations (_N) was 3, now 4.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,161
        from master                    94,161  
        from using                          0  

    Matched                               816
        not updated                       816  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(816 real changes made)
Number of observations (_N) was 4, now 5.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,161
        from master                    94,161  
        from using                          0  

    Matched                               816
        not updated                       816  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(816 real changes made)
Number of observations (_N) was 5, now 6.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(92,227 observations deleted)
(92,227 observations deleted)
(92,227 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        92,227
        from master                    92,227  
        from using                          0  

    Matched                             2,750
        not updated                     2,750  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(2,750 real changes made)
Number of observations (_N) was 6, now 7.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        92,227
        from master                    92,227  
        from using                          0  

    Matched                             2,750
        not updated                     2,750  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(2,750 real changes made)
Number of observations (_N) was 7, now 8.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        92,227
        from master                    92,227  
        from using                          0  

    Matched                             2,750
        not updated                     2,750  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(2,750 real changes made)
Number of observations (_N) was 8, now 9.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(85,826 observations deleted)
(85,826 observations deleted)
(85,826 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,826
        from master                    85,826  
        from using                          0  

    Matched                             9,151
        not updated                     9,151  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,151 real changes made)
Number of observations (_N) was 9, now 10.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,826
        from master                    85,826  
        from using                          0  

    Matched                             9,151
        not updated                     9,151  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,151 real changes made)
Number of observations (_N) was 10, now 11.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,826
        from master                    85,826  
        from using                          0  

    Matched                             9,151
        not updated                     9,151  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,151 real changes made)
Number of observations (_N) was 11, now 12.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(91,915 observations deleted)
(91,915 observations deleted)
(91,915 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        91,915
        from master                    91,915  
        from using                          0  

    Matched                             3,062
        not updated                     3,062  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(3,062 real changes made)
Number of observations (_N) was 12, now 13.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        91,915
        from master                    91,915  
        from using                          0  

    Matched                             3,062
        not updated                     3,062  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(3,062 real changes made)
Number of observations (_N) was 13, now 14.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        91,915
        from master                    91,915  
        from using                          0  

    Matched                             3,062
        not updated                     3,062  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(3,062 real changes made)
Number of observations (_N) was 14, now 15.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,207 observations deleted)
(93,207 observations deleted)
(93,207 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,207
        from master                    93,207  
        from using                          0  

    Matched                             1,770
        not updated                     1,770  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,770 real changes made)
Number of observations (_N) was 15, now 16.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,207
        from master                    93,207  
        from using                          0  

    Matched                             1,770
        not updated                     1,770  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,770 real changes made)
Number of observations (_N) was 16, now 17.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,460 observations deleted)
(93,460 observations deleted)
(93,460 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,460
        from master                    93,460  
        from using                          0  

    Matched                             1,517
        not updated                     1,517  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,517 real changes made)
Number of observations (_N) was 17, now 18.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,460
        from master                    93,460  
        from using                          0  

    Matched                             1,517
        not updated                     1,517  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,517 real changes made)
Number of observations (_N) was 18, now 19.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(90,234 observations deleted)
(90,234 observations deleted)
(90,234 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        90,234
        from master                    90,234  
        from using                          0  

    Matched                             4,743
        not updated                     4,743  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(4,743 real changes made)
Number of observations (_N) was 19, now 20.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        90,234
        from master                    90,234  
        from using                          0  

    Matched                             4,743
        not updated                     4,743  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(4,743 real changes made)
Number of observations (_N) was 20, now 21.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,992 observations deleted)
(93,992 observations deleted)
(93,992 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,992
        from master                    93,992  
        from using                          0  

    Matched                               985
        not updated                       985  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(985 real changes made)
Number of observations (_N) was 21, now 22.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,992
        from master                    93,992  
        from using                          0  

    Matched                               985
        not updated                       985  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(985 real changes made)
Number of observations (_N) was 22, now 23.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,992
        from master                    93,992  
        from using                          0  

    Matched                               985
        not updated                       985  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(985 real changes made)
Number of observations (_N) was 23, now 24.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(89,281 observations deleted)
(89,281 observations deleted)
(89,281 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        89,281
        from master                    89,281  
        from using                          0  

    Matched                             5,696
        not updated                     5,696  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(5,696 real changes made)
Number of observations (_N) was 24, now 25.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        89,281
        from master                    89,281  
        from using                          0  

    Matched                             5,696
        not updated                     5,696  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(5,696 real changes made)
Number of observations (_N) was 25, now 26.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        89,281
        from master                    89,281  
        from using                          0  

    Matched                             5,696
        not updated                     5,696  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(5,696 real changes made)
Number of observations (_N) was 26, now 27.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(92,790 observations deleted)
(92,790 observations deleted)
(92,790 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        92,790
        from master                    92,790  
        from using                          0  

    Matched                             2,187
        not updated                     2,187  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(2,187 real changes made)
Number of observations (_N) was 27, now 28.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        92,790
        from master                    92,790  
        from using                          0  

    Matched                             2,187
        not updated                     2,187  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(2,187 real changes made)
Number of observations (_N) was 28, now 29.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(87,392 observations deleted)
(87,392 observations deleted)
(87,392 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        87,392
        from master                    87,392  
        from using                          0  

    Matched                             7,585
        not updated                     7,585  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(7,585 real changes made)
Number of observations (_N) was 29, now 30.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        87,392
        from master                    87,392  
        from using                          0  

    Matched                             7,585
        not updated                     7,585  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(7,585 real changes made)
Number of observations (_N) was 30, now 31.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        87,392
        from master                    87,392  
        from using                          0  

    Matched                             7,585
        not updated                     7,585  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(7,585 real changes made)
Number of observations (_N) was 31, now 32.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(89,821 observations deleted)
(89,821 observations deleted)
(89,821 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        89,821
        from master                    89,821  
        from using                          0  

    Matched                             5,156
        not updated                     5,156  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(5,156 real changes made)
Number of observations (_N) was 32, now 33.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        89,821
        from master                    89,821  
        from using                          0  

    Matched                             5,156
        not updated                     5,156  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(5,156 real changes made)
Number of observations (_N) was 33, now 34.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,465 observations deleted)
(93,465 observations deleted)
(93,465 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,465
        from master                    93,465  
        from using                          0  

    Matched                             1,512
        not updated                     1,512  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,512 real changes made)
Number of observations (_N) was 34, now 35.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,465
        from master                    93,465  
        from using                          0  

    Matched                             1,512
        not updated                     1,512  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,512 real changes made)
Number of observations (_N) was 35, now 36.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(88,171 observations deleted)
(88,171 observations deleted)
(88,171 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,171
        from master                    88,171  
        from using                          0  

    Matched                             6,806
        not updated                     6,806  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,806 real changes made)
Number of observations (_N) was 36, now 37.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,171
        from master                    88,171  
        from using                          0  

    Matched                             6,806
        not updated                     6,806  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,806 real changes made)
Number of observations (_N) was 37, now 38.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,171
        from master                    88,171  
        from using                          0  

    Matched                             6,806
        not updated                     6,806  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,806 real changes made)
Number of observations (_N) was 38, now 39.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,394 observations deleted)
(93,394 observations deleted)
(93,394 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,394
        from master                    93,394  
        from using                          0  

    Matched                             1,583
        not updated                     1,583  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,583 real changes made)
Number of observations (_N) was 39, now 40.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,394
        from master                    93,394  
        from using                          0  

    Matched                             1,583
        not updated                     1,583  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,583 real changes made)
Number of observations (_N) was 40, now 41.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,394
        from master                    93,394  
        from using                          0  

    Matched                             1,583
        not updated                     1,583  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,583 real changes made)
Number of observations (_N) was 41, now 42.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(90,521 observations deleted)
(90,521 observations deleted)
(90,521 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        90,521
        from master                    90,521  
        from using                          0  

    Matched                             4,456
        not updated                     4,456  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(4,456 real changes made)
Number of observations (_N) was 42, now 43.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        90,521
        from master                    90,521  
        from using                          0  

    Matched                             4,456
        not updated                     4,456  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(4,456 real changes made)
Number of observations (_N) was 43, now 44.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        90,521
        from master                    90,521  
        from using                          0  

    Matched                             4,456
        not updated                     4,456  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(4,456 real changes made)
Number of observations (_N) was 44, now 45.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(93,246 observations deleted)
(93,246 observations deleted)
(93,246 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,246
        from master                    93,246  
        from using                          0  

    Matched                             1,731
        not updated                     1,731  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,731 real changes made)
Number of observations (_N) was 45, now 46.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        93,246
        from master                    93,246  
        from using                          0  

    Matched                             1,731
        not updated                     1,731  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(1,731 real changes made)
Number of observations (_N) was 46, now 47.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(94,624 observations deleted)
(94,624 observations deleted)
(94,624 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,624
        from master                    94,624  
        from using                          0  

    Matched                               353
        not updated                       353  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(353 real changes made)
Number of observations (_N) was 47, now 48.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,624
        from master                    94,624  
        from using                          0  

    Matched                               353
        not updated                       353  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(353 real changes made)
Number of observations (_N) was 48, now 49.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,624
        from master                    94,624  
        from using                          0  

    Matched                               353
        not updated                       353  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(353 real changes made)
Number of observations (_N) was 49, now 50.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(88,962 observations deleted)
(88,962 observations deleted)
(88,962 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,962
        from master                    88,962  
        from using                          0  

    Matched                             6,015
        not updated                     6,015  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,015 real changes made)
Number of observations (_N) was 50, now 51.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,962
        from master                    88,962  
        from using                          0  

    Matched                             6,015
        not updated                     6,015  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,015 real changes made)
Number of observations (_N) was 51, now 52.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        88,962
        from master                    88,962  
        from using                          0  

    Matched                             6,015
        not updated                     6,015  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(6,015 real changes made)
Number of observations (_N) was 52, now 53.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(85,535 observations deleted)
(85,535 observations deleted)
(85,535 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,535
        from master                    85,535  
        from using                          0  

    Matched                             9,442
        not updated                     9,442  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,442 real changes made)
Number of observations (_N) was 53, now 54.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,535
        from master                    85,535  
        from using                          0  

    Matched                             9,442
        not updated                     9,442  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,442 real changes made)
Number of observations (_N) was 54, now 55.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        85,535
        from master                    85,535  
        from using                          0  

    Matched                             9,442
        not updated                     9,442  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(9,442 real changes made)
Number of observations (_N) was 55, now 56.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format
(94,338 observations deleted)
(94,338 observations deleted)
(94,338 observations deleted)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,338
        from master                    94,338  
        from using                          0  

    Matched                               639
        not updated                       639  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(639 real changes made)
Number of observations (_N) was 56, now 57.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                        94,338
        from master                    94,338  
        from using                          0  

    Matched                               639
        not updated                       639  
        missing updated                     0  
        nonmissing conflict                 0  
    -----------------------------------------
(639 real changes made)
Number of observations (_N) was 57, now 58.
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
file C:\Users\dafrb\AppData\Local\Temp\ST_63d8_000003.tmp saved as .dta format

. 
. *------------------------------------------------------------------------------*
. * Export coefficients
. *------------------------------------------------------------------------------*
. 
. preserve

.     use `coef_storage', clear

.     drop if method == ""
(0 observations deleted)

.     
.     * Sort by industry and method
.     sort ciiu_rev4_2d method

. 
.     * Export
.     export delimited using "$output_dir/tfp_coefficients_by_method.csv", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/output/tfp_coefficients_by_method.csv saved

. restore

. 
. *------------------------------------------------------------------------------*
. * TFP correlations
. *------------------------------------------------------------------------------*
. 
. * Correlations between methods
. correlate omega_lp omega_wrdg omega_acf if !missing(omega_lp, omega_wrdg, omega_acf)
(obs=75,722)

             | omega_lp omega_~g omega_~f
-------------+---------------------------
    omega_lp |   1.0000
  omega_wrdg |   0.9988   1.0000
   omega_acf |   0.2013   0.2100   1.0000


. 
. * Export correlation matrix
. preserve

.     correlate omega_lp omega_wrdg omega_acf if !missing(omega_lp, omega_wrdg, omega_acf)
(obs=75,722)

             | omega_lp omega_~g omega_~f
-------------+---------------------------
    omega_lp |   1.0000
  omega_wrdg |   0.9988   1.0000
   omega_acf |   0.2013   0.2100   1.0000


.     matrix C = r(C)

.     
.     clear

.     svmat C, names(col)
number of observations will be reset to 3
Press any key to continue, or Break to abort
Number of observations (_N) was 0, now 3.

.     
.     gen method = ""
(3 missing values generated)

.     replace method = "LP" in 1
variable method was str1 now str2
(1 real change made)

.     replace method = "WRDG" in 2
variable method was str2 now str4
(1 real change made)

.     replace method = "ACF" in 3
(1 real change made)

.     
.     order method

.     
.     export delimited using "$output_dir/tfp_correlations.csv", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/output/tfp_correlations.csv saved

. restore

. *------------------------------------------------------------------------------*
. * Save panel with TFP estimates
. *------------------------------------------------------------------------------*
. 
. * Label all TFP variables
. label variable omega_lp "Log TFP (Levinsohn-Petrin)"

. label variable omega_wrdg "Log TFP (Wooldridge)"

. label variable omega_acf "Log TFP (Ackerberg-Caves-Frazer)"

. 
. * Sort
. sort firm_id year

. 
. * Save
. save "$clean_dir/panel_eam_with_tfp.dta", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/processed/panel_eam_with_tfp.dta saved

. 
. local n_obs_final = _N

. 
. *------------------------------------------------------------------------------*
. * Summary statistics export
. *------------------------------------------------------------------------------*
. 
. * By industry-year
. preserve

.     collapse (mean) mean_tfp_lp=omega_lp mean_tfp_wrdg=omega_wrdg mean_tfp_acf=omega_acf ///
>              (sd) sd_tfp_lp=omega_lp sd_tfp_wrdg=omega_wrdg sd_tfp_acf=omega_acf ///
>              (count) n_obs=omega_lp, ///
>              by(ciiu_rev4_2d year)

.     
.     export delimited using "$output_dir/tfp_by_industry_year.csv", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/output/tfp_by_industry_year.csv saved

. restore

. 
. *------------------------------------------------------------------------------*
. * Comparison table
. *------------------------------------------------------------------------------*
. 
. preserve

.     * Reshape to compare methods
.     keep firm_id year ciiu_rev4_2d omega_lp omega_wrdg omega_acf

.     
.     * Only keep complete observations
.     keep if !missing(omega_lp, omega_wrdg, omega_acf)
(19,255 observations deleted)

.     
.     * Calculate differences
.     gen diff_lp_wrdg = omega_lp - omega_wrdg

.     gen diff_lp_acf = omega_lp - omega_acf

.     gen diff_wrdg_acf = omega_wrdg - omega_acf

.     
.     * Summary statistics
.     collapse (mean) mean_diff_lp_wrdg=diff_lp_wrdg ///
>                     mean_diff_lp_acf=diff_lp_acf ///
>                     mean_diff_wrdg_acf=diff_wrdg_acf ///
>              (sd) sd_diff_lp_wrdg=diff_lp_wrdg ///
>                   sd_diff_lp_acf=diff_lp_acf ///
>                   sd_diff_wrdg_acf=diff_wrdg_acf ///
>              (count) n_obs=diff_lp_wrdg, ///
>              by(ciiu_rev4_2d)

.     
.     export delimited using "$output_dir/tfp_method_comparison.csv", replace
file C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/output/tfp_method_comparison.csv saved

. restore

. 
. log close
      name:  <unnamed>
       log:  C:\Users\dafrb\Desktop\EAM_data\CHINA-SCHOCK/logs/04_tfp_prodest_23 Nov 2025.log
  log type:  text
 closed on:  23 Nov 2025, 00:20:37
----------------------------------------------------------------------------------------------------------------------------------------
